[tox]
envlist = py311, lint, typecheck
skipsdist = true

[testenv]
deps =
    pytest
    requests
    openai
    whisper
    torch
    fastapi
    uvicorn
    python-multipart
commands =
    pytest backend/

[testenv:lint]
description = Run ruff for linting and formatting checks
skip_install = true
deps = ruff
commands =
    ruff check backend/
    ruff format --check backend/

[testenv:typecheck]
description = Run mypy for static type checks
skip_install = true
deps = mypy
commands = mypy backend/

[ruff]
line-length = 100
exclude = .venv,.tox,__pycache__,tests/data

[mypy]
python_version = 3.11
ignore_missing_imports = true
disallow_untyped_defs = true
